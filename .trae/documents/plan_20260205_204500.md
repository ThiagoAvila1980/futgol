# Plano de Implementação: Módulo para Donos de Campo

Para atender aos requisitos de escalar o aplicativo para donos de campo, implementaremos um novo módulo "Dono de Campo" integrado ao sistema atual.

## 1. Banco de Dados (Schema)

Precisamos ajustar as tabelas para suportar a propriedade de campos e o agendamento.

* **Tabela** **`players`** **(Usuários)**:

  * O campo `role` já existe. Vamos formalizar o uso do valor `'field_owner'` (Dono de Campo).

* **Tabela** **`fields`** **(Campos)**:

  * Adicionar `owner_id` (FK para `players`): Para vincular o campo ao dono.

  * Adicionar `description` (TEXT): Para detalhes do campo.

  * Adicionar `photos` (TEXT/JSON): Para armazenar URLs de fotos.

  * Adicionar `city` (TEXT): Para facilitar a busca por região.

* **Nova Tabela** **`field_slots`** **(Horários/Agenda)**:

  * Gerenciar a disponibilidade.

  * Colunas: `id`, `field_id`, `start_time`, `end_time`, `price`, `is_booked`, `booked_by_group_id`.

## 2. Backend (API)

Novos endpoints para suportar as funcionalidades:

### Autenticação

* **Registro (`/api/auth/register`)**: Aceitar a opção de se cadastrar como `field_owner`.

### Área do Dono (`/api/owner/*`)

* **`GET /api/owner/fields`**: Listar campos do dono logado.

* **`POST /api/owner/fields`**: Criar novo campo.

* **`PUT /api/owner/fields/:id`**: Atualizar detalhes e fotos.

* **`POST /api/owner/fields/:id/slots`**: Gerar horários disponíveis (ex: criar agenda da semana).

* **`GET /api/owner/fields/:id/slots`**: Visualizar agenda e status de ocupação.

### Área dos Grupos (`/api/marketplace/*`)

* **`GET /api/fields/search`**: Buscar campos disponíveis por cidade.

* **`POST /api/fields/:id/book`**: Reservar um horário vago.

## 3. Frontend (Interface)

Adaptações na interface para os dois perfis:

### Registro e Login

* Adicionar opção "Sou Dono de Campo" no formulário de cadastro.

### Painel do Dono (Novo Módulo)

* Criar uma nova "View" (`OwnerDashboard`) acessível via botão exclusivo para usuários `field_owner`.

* **Meus Campos**: CRUD de campos com upload de fotos (URL por enquanto) e descrição.

* **Gestão de Agenda**: Interface de calendário para abrir horários (ex: "Disponibilizar Terças das 19h às 23h").

### Integração com Grupos

* Adicionar botão "Buscar Campos" no painel do grupo.

* Visualização de detalhes do campo e horários disponíveis para agendamento.

## Passo a Passo da Execução

1. **Migração de DB**: Criar script para adicionar colunas e criar tabela `field_slots`.
2. **Backend**: Atualizar lógica de registro e criar rotas da API do Dono.
3. **Frontend**:

   * Atualizar tela de Cadastro.

   * Criar componentes do `OwnerDashboard`.

   * Adicionar botão de acesso no menu principal.

